<div class="col-md-12">
	<div class="row">
		<div  id="locals-selector" class="radio">
			<% @locations.each do |local| %>
				<label id="<%= local.id %>" >
					<input type="radio" name="localRadio" id="localOption<%= local.id %>" onchange="loadProviders()" value="<%= local.id %>" <%= 'checked' if ((!@selectedLocal) && (local.id == @locations.first.id)) || (@selectedLocal.to_i == local.id) %>>
					<p><%= local.name %></p>
				</label>
			<% end %>
		</div>
	</div>
	<div class="row">
		<div id="providers-selector" class="radio">
			<%= image_tag "ajax-loader.gif", :alt => "Loader" %>
		</div>
	</div>
</div>

<% content_for :calendar do %>
	<div class="col-md-12">
			<%= link_to '<i class="fa fa-times"></i>  Bloquear Horas / Vacaciones'.html_safe, '#', :class => "btn btn-primary btn-md createBreak modal-trigger" unless current_user.role_id == Role.find_by_name('Staff').id %>
			<%= link_to '<i class="fa fa-calendar"></i>  Agregar Reserva'.html_safe, '#', :class => "btn btn-primary btn-md createBooking modal-trigger" %>
		<div class="row">
			<div id='calendar'></div>
		</div>
	</div>
<% end %>

<div class="modal fade" id="bookingModal" tabindex="-1" role="dialog" aria-labelledby="bookingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-admin">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title booking-modal-title" id="bookingModalLabel"></h4>
			</div>
			<div class="modal-body booking-modal-body">
				<%= form_for @booking, html: {class: "form-horizontal"} do |f| %>
				<div class="row well well-sm">	
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="datePicker" class="col-sm-4 control-label">Fecha: </label>
								<div class="col-sm-8">
									<input type="text" id="datePicker" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-4 control-label">Hora: </label>
								<div class="col-sm-8">
									<div class="input datetime required booking_start_end ">       
										<select class="form-control date-select datetime required" id="bookingStartHour" name="booking[start_hours]">
											<option value="00">00</option>
											<option value="01">01</option>
											<option value="02">02</option>
											<option value="03">03</option>
											<option value="04">04</option>
											<option value="05">05</option>
											<option value="06">06</option>
											<option value="07">07</option>
											<option value="08">08</option>
											<option value="09">09</option>
											<option value="10">10</option>
											<option value="11">11</option>
											<option value="12">12</option>
											<option value="13">13</option>
											<option value="14">14</option>
											<option value="15">15</option>
											<option value="16">16</option>
											<option value="17">17</option>
											<option value="18">18</option>
											<option value="19">19</option>
											<option value="20">20</option>
											<option value="21">21</option>
											<option value="22">22</option>
											<option value="23">23</option>
										</select>
										:<select class="form-control date-select datetime required" id="bookingStartMinute" name="booking[start_minutes]">
											<option value="00">00</option>
											<option value="05">05</option>
											<option value="10">10</option>
											<option value="15">15</option>
											<option value="20">20</option>
											<option value="25">25</option>
											<option value="30">30</option>
											<option value="35">35</option>
											<option value="40">40</option>
											<option value="45">45</option>
											<option value="50">50</option>
											<option value="55">55</option>
										</select> - 
										<select class="form-control date-select datetime required" id="bookingEndHour" name="booking[end_hours]">
											<option value="00">00</option>
											<option value="01">01</option>
											<option value="02">02</option>
											<option value="03">03</option>
											<option value="04">04</option>
											<option value="05">05</option>
											<option value="06">06</option>
											<option value="07">07</option>
											<option value="08">08</option>
											<option value="09">09</option>
											<option value="10">10</option>
											<option value="11">11</option>
											<option value="12">12</option>
											<option value="13">13</option>
											<option value="14">14</option>
											<option value="15">15</option>
											<option value="16">16</option>
											<option value="17">17</option>
											<option value="18">18</option>
											<option value="19">19</option>
											<option value="20">20</option>
											<option value="21">21</option>
											<option value="22">22</option>
											<option value="23">23</option>
										</select>
										:<select class="form-control date-select datetime required" id="bookingEndMinute" name="booking[end_minutes]">
											<option value="00">00</option>
											<option value="05">05</option>
											<option value="10">10</option>
											<option value="15">15</option>
											<option value="20">20</option>
											<option value="25">25</option>
											<option value="30">30</option>
											<option value="35">35</option>
											<option value="40">40</option>
											<option value="45">45</option>
											<option value="50">50</option>
											<option value="55">55</option>
										</select>
									</div>
								</div>
							</div>
							<div class="form-group">
								<%= f.label :service_provider_id, "Proveedor de Servicios: ", class: "col-sm-4 control-label" %>
								<div class="col-sm-8">
									<%= f.collection_select :service_provider_id, ServiceProvider.where(location_id: Location.where(company_id: current_user.company_id, :active => true).accessible_by(current_ability)), :id, :public_name, {}, { class: "form-control" }%>
								</div>
							</div>
							<div class="form-group">
								<%= f.label :service, "Servicio: ", class: "col-sm-4 control-label" %>
								<div class="col-sm-8">
									<select class="form-control" id="booking_service_id" name="booking[service_id]" disabled></select>
									<!-- <%= f.collection_select :service_id, Service.where(company_id: current_user.company_id), :id, :name, {}, { class: "form-control" }%> -->
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<% if @booking.client.nil? then @booking.build_client end %>
							<%= f.fields_for :client do |builder| %>
							<%= builder.hidden_field :last_name %>
							<%= builder.hidden_field :first_name %>
							<div class="form-group">
								<label for="full_name" class="col-sm-4 control-label">Nombre Cliente: </label>
								<div class="col-sm-8">
									<input type="text" id="full_name" class="form-control">
									<ul id="full_name_suggestions"></ul>
								</div>
							</div>
							<div class="form-group">
								<%= builder.label :email, "Email: ", class: "col-sm-4 control-label" %>
								<div class="col-sm-8">
									<%= builder.text_field :email, class: "form-control" %>
									<ul id="email_suggestions"></ul>
									<div class="checkbox">
										<%= f.check_box :send_mail, :disabled => true %>
										<%= f.label :send_mail, "Notificar por e-mail" %>
									</div>
								</div>
							</div>
							<div class="form-group">
								<%= builder.label :phone, "TelÃ©fono: ", class: "col-sm-4 control-label" %>
								<div class="col-sm-8">
									<%= builder.text_field :phone, class: "form-control" %>
								</div>
							</div>
							<% end %>
							<div class="form-group">
								<%= f.label :status, "Estado: ", class: "col-sm-4 control-label" %>
								<div class="col-sm-8">
									<%= f.collection_select :status_id, Status.all, :id, :name, {selected: Status.find_by_name( 'Reservado').id}, { class: "form-control" }%>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<%= f.label :notes, "Notas compartidas con cliente: ", class: "col-sm-2 control-label" %>
								<div class="col-sm-10">
									<%= f.text_area :notes, :rows => "4", class: "form-control modal-textarea" %>
								</div>
							</div>
							<div class="form-group">
								<%= f.label :company_comment, "Comentario Interno: ", class: "col-sm-2 control-label" %>
								<div class="col-sm-10">
									<%= f.text_area :company_comment, :rows => "4", class: "form-control modal-textarea" %>
								</div>
							</div>
						</div>
					</div>
				</div>
				<% end %>
			</div>
			<div class="modal-footer booking-modal-footer">
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="breakModal" tabindex="-1" role="dialog" aria-labelledby="breakModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title break-modal-title" id="breakModalLabel">Bloquear Horas o Agregar Vacaciones</h4>
			</div>
			<div class="modal-body break-modal-body">
				<%= form_for @provider_break, html: {class: "form-horizontal"} do |f| %>
					<div class="form-group">
						<%= f.label :service_provider_id, "Proveedor de Servicios: ", class: "col-sm-3 control-label" %>
						<div class="col-sm-9">
							<%= f.collection_select :service_provider_id, ServiceProvider.where(location_id: Location.where(company_id: current_user.company_id, :active => true).accessible_by(current_ability)), :id, :public_name, {}, { class: "form-control" }%>
						</div>
					</div>
					<div class="form-group">
						<%= f.label :start, "Inicio: ", class: "col-sm-3 control-label" %>
						<div class="col-sm-9">
							<%= f.datetime_select :start, {}, {class: "form-control date-select"} %>
						</div>
					</div>
					<div class="form-group">
						<%= f.label :end, "Fin: ", class: "col-sm-3 control-label" %>
						<div class="col-sm-9">
							<%= f.datetime_select :end, {}, {class: "form-control date-select"} %>
						</div>
					</div>
				<% end %>
			</div>
			<div class="modal-footer break-modal-footer">
			</div>
		</div>
	</div>
</div>


<% content_for :scripts do %>
	<%= javascript_include_tag "bookings" %>
	<%= javascript_include_tag "jquery-ui-1.10.4.min.js" %>
<% end %>
<% content_for :stylesheets do %>
	<%= stylesheet_link_tag "jquery-ui-1.10.4" %>
	<%= stylesheet_link_tag "admin/admin-calendar" %>
<% end %>
