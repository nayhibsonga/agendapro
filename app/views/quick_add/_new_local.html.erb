<div id="quick_add_step2" class="content-fill">
  <div class="container-fluid background-green">
    <div class="row">
      <div class="col-md-12">
        <h2 class="text-center">¿Cuántos locales/sucursales tienes?</h2>
        <p class="text-center text-dark-green">Completa la información de cada uno de tus locales (máximo 5)</p>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <!-- Local -->
    <div class="box-step step-workflow">
      <fieldset id="fieldset_step2" disabled>
        <div class="col-md-12">
          <h4>Nuevo Local</h4>
        </div>
        <div class="col-md-6">
          <%= form_for @location, html: {class: "form-horizontal"} do |f| %>
            <%= f.hidden_field :latitude %>
            <%= f.hidden_field :longitude %>
            <div class="form-group has-feedback">
              <%= f.label :name, "Nombre: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.text_field :name, :autofocus => true, class: "form-control" %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= label_tag :country, "País: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= select_tag :country, options_from_collection_for_select(Country.all.order(:name), :id, :name), class: "form-control", include_blank: true %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= label_tag :region, "Región: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= select_tag :region, options_from_collection_for_select(Region.all.order(:name), :id, :name), class: "form-control", :disabled => true %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= label_tag :city, "Ciudad: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= select_tag :city, options_from_collection_for_select(City.all.order(:name), :id, :name), class: "form-control", :disabled => true %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= f.label :district, "Comuna: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.collection_select :district_id, District.all, :id, :name, {}, { class: "form-control", :disabled => true }%>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= f.label :address, "Dirección: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.text_field :address, class: "form-control" %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= f.label :second_address, "Dirección Adicional", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.text_field :second_address, class: "form-control", placeholder: 'Oficina D, Local 22' %>
                <span class="help-block"></span>
                <span class="form-control-feedback"></span>
                <div class="checkbox">
                  <label>
                    <%= f.check_box :outcall %> Sin Dirección (sólo servicios a domicilio).
                  </label>
                </div>
                <div id="districtsCheckboxes" class='hidden'></div>
              </div>
            </div>
            <div class="form-group has-feedback">
              <%= f.label :phone, "Teléfono: ", class: "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.text_field :phone, class: "form-control" %>
                <span class="help-block"></span>
              </div>
            </div>
          <% end %>
          <div style="margin-top: 10px;">
            <h4 class="text-center" style="margin-bottom: 0;">¿Aquí se ubica tu local? <small class="hide"><i class="fa fa-spinner fa-spin"></i></small></h4>
            <span class="hide" id="error">Hubo un error ubicando tu local</span>
            <span>Puedes dar click en el mapa para cambiar la ubicación</span>
            <div id="map"></div>
        <br />
        <br />
          </div>
        </div>
        <div class="col-md-6">
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title">
                Horario Local
              </h3>
            </div>
            <div class="panel-body">
              <table class="table">
                <tbody id="localTable">
                  <tr>
                    <th>Día</th>
                    <th>Apertura</th>
                    <th>Cierre</th>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
</div>

<% content_for :scripts do %>
  <%= javascript_include_tag "admin/quick_add/locations" %>
<% end %>
